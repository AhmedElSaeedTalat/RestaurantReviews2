{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=2)}([function(e,t){class n{static get DATABASE_URL(){return\"http://localhost:1337/restaurants\"}static fetchRestaurants(e){fetch(n.DATABASE_URL,{method:\"GET\"}).then(e=>e.json()).then(t=>{e(null,t)}).catch(t=>{e(`Request failed. Returned status of ${t}`,null)})}static fetchRestaurantById(e,t){n.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.find(t=>t.id==e);n?t(null,n):t(\"Restaurant does not exist\",null)}})}static fetchRestaurantByCuisine(e,t){n.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.filter(t=>t.cuisine_type==e);t(null,n)}})}static fetchRestaurantByNeighborhood(e,t){n.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.filter(t=>t.neighborhood==e);t(null,n)}})}static fetchRestaurantByCuisineAndNeighborhood(e,t,r){n.fetchRestaurants((n,a)=>{if(n)r(n,null);else{let n=a;\"all\"!=e&&(n=n.filter(t=>t.cuisine_type==e)),\"all\"!=t&&(n=n.filter(e=>e.neighborhood==t)),r(null,n)}})}static fetchNeighborhoods(e){n.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].neighborhood),r=t.filter((e,n)=>t.indexOf(e)==n);e(null,r)}})}static fetchCuisines(e){n.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].cuisine_type),r=t.filter((e,n)=>t.indexOf(e)==n);e(null,r)}})}static urlForRestaurant(e){return`./restaurant.html?id=${e.id}`}static imageUrlForRestaurant(e){return`/img/${e.photograph}`}static imageUrlForRestaurantLarge(e){return`/images/${e.photoLarge}`}static mapMarkerForRestaurant(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:n.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}}window.DBHelper=n},function(e,t,n){n(0),window.initMap=(()=>{fetchRestaurantFromURL1((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById(\"map\"),{zoom:16,center:t.latlng,scrollwheel:!1}),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})}),window.onload=fetchRestaurantFromURL=(e=>{const t=getParameterByName(\"id\");DBHelper.fetchRestaurantById(t,(e,t)=>{self.restaurant=t,t?(fillRestaurantHTML(),fillBreadcrumb()):console.error(e)})}),fetchRestaurantFromURL1=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName(\"id\");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?e(null,n):console.error(t)}):(error=\"No restaurant id in URL\",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById(\"restaurant-name\").innerHTML=e.name,document.getElementById(\"restaurant-address\").innerHTML=e.address;const t=document.getElementById(\"restaurant-img\");t.srcset=`/images/${e.photograph}-small.jpg 650w, /images/${e.photograph}-large.jpg 800w`,t.src=`/images/${e.photograph}-small.jpg`,t.alt=e.alt,document.getElementById(\"restaurant-cuisine\").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById(\"restaurant-hours\");for(let n in e){const r=document.createElement(\"tr\"),a=document.createElement(\"td\");a.innerHTML=n,r.appendChild(a);const l=document.createElement(\"td\");l.innerHTML=e[n],r.appendChild(l),t.appendChild(r)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById(\"reviews-container\"),n=document.createElement(\"h2\");if(n.innerHTML=\"Reviews\",t.appendChild(n),!e){const e=document.createElement(\"p\");return e.innerHTML=\"No reviews yet!\",void t.appendChild(e)}const r=document.getElementById(\"reviews-list\");e.forEach(e=>{r.appendChild(createReviewHTML(e))}),t.appendChild(r)}),createReviewHTML=(e=>{const t=document.createElement(\"li\"),n=document.createElement(\"p\");n.innerHTML=e.name,t.appendChild(n);const r=document.createElement(\"p\");r.innerHTML=e.date,t.appendChild(r);const a=document.createElement(\"p\");a.innerHTML=`Rating: ${e.rating}`,t.appendChild(a);const l=document.createElement(\"p\");return l.innerHTML=e.comments,t.appendChild(l),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementsByClassName(\"breadcrumb\"),n=document.createElement(\"li\");function r(e){e.matches?t[0].appendChild(n):t[1].appendChild(n)}n.innerHTML=e.name,n.setAttribute(\"aria-current\",\"page\");var a=window.matchMedia(\"(min-width: 767px)\");r(a),a.addListener(r)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\\[\\]]/g,\"\\\\$&\");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\\+/g,\" \")):\"\":null})},function(e,t,n){e.exports=n(1)}]);","extractedComments":[]}